function tableSetup(a){a.find("li").removeAttr("style");var b=a.find(".row"),c=getMaxListItems(b),d=getListOfWidths(b,c);d=setupVariableCell(a,d),setWidths(b,c,d)}function setupVariableCell(a,b){var c=a.find(".variable").first().index(),d=a.find(".row");b.splice(c,1);var e=sumOfArray(b);return b.splice(c,0,d.width()-e),b}function sumOfArray(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b}function setWidths(a,b,c){for(var d=0;d<b;d++)a.each(function(){var a=$(this).find("li").eq(d);a.css("width",c[d])})}function getListOfWidths(a,b){for(var c=[],d=0;d<b;d++){var e=0;a.each(function(){var a=$(this).find("li").eq(d);e<a.width()&&(e=a.width())}),c.push(e+gap)}return c}function getMaxListItems(a){var b=0;return a.each(function(){b<$(this).find("li").length&&(b=$(this).find("li").length)}),b}function addModalContent(a){var b=a.parent(),c=b.find(".modal-container"),d=$("#myModal");$("#modal-cancel").data("origin",b.attr("id"));var e=d.find(".modal-header"),f=d.find(".modal-body"),g=c.find(".modal-title").detach(),h=c.find(".content").detach();e.append(g),f.append(h),d.modal("show")}function removeModalContent(){var a=$("#modal-cancel").data("origin"),b=$("#"+a),c=$("#myModal"),d=c.find(".modal-title").detach(),e=c.find(".modal-body .content").detach(),f=b.find(".modal-container");f.append(d),f.append(e)}function updateCheckBox(a){addCheck($("#member-"+a))}function addCheck(a){a.attr("data-status","checked"),a.find("i").removeClass("fa-square-o"),a.find("i").addClass("fa-check-square-o");var b=$("#Form_JobAllocation_job-allocations");if(b[0].hasAttribute("value")){var c=b.attr("value").split(",");c.push(a.attr("value"));var d=c.join(",");b.attr("value",d)}else b.attr("value",a.attr("value"))}function removeCheck(a){a.attr("data-status","unchecked"),a.find("i").addClass("fa-square-o"),a.find("i").removeClass("fa-check-square-o");var b=$("#Form_JobAllocation_job-allocations");if(b[0].hasAttribute("value")){var c=b.attr("value").split(","),d=c.indexOf(a.attr("value"));c.splice(d,1);var e=c.join(",");b.attr("value",e)}}function checkItem(a){"unchecked"===a.attr("data-status")?addCheck(a):removeCheck(a)}$(document).ready(function(){setup(),$(".menu-toggle").on("click",function(){toggleMobileMenu($(this).next())}),$("#nav>ul>li>a").on("click",function(a){correctWindowWidth()&&a.preventDefault(),toggleParentLayer($(this).parent(),a.target.href)})});var toggleParentLayer=function(a,b){if($("#nav.mobile").length){var c=a.find(">ul");c.length?toggleMobileMenu(c):window.location=b}},setup=function(){$(window).on("resize",function(){if(setMenuType(),!correctWindowWidth()){var a=$("#nav ul");a.removeAttr("style"),a.data("toggle","")}}),setMenuType()},setMenuType=function(){correctWindowWidth()?$("#nav").addClass("mobile").removeClass("desktop"):$("#nav").addClass("desktop").removeClass("mobile")},correctWindowWidth=function(){return $(window).width()<=768},toggleMobileMenu=function(a){"open"===a.data("toggle")?(a.slideUp(),a.data("toggle",""),a.parent().find(">a>.arrow-toggle").addClass("fa-chevron-down").removeClass("fa-chevron-up")):(a.slideDown(),a.data("toggle","open"),a.parent().find(">a>.arrow-toggle").addClass("fa-chevron-up").removeClass("fa-chevron-down"))};$(document).ready(function(){$(window).on("resize",function(){$(".table").each(function(){tableSetup($(this))})}),$(".table").each(function(){tableSetup($(this))}),$(".modal-launcher button").on("click",function(){addModalContent($(this))}),$("#modal-cancel").on("click",function(){removeModalContent()})});var base_url=window.location.origin,host=window.location.host,pathArray=window.location.pathname.split("/"),gap=40,updateUserNavigationFlag=function(a){var b={member:a,url:window.location.href},c="users/lock";$.ajax({type:"POST",url:c,data:b,success:function(a){console.log("updated user navigation flag")}})};$(document).ready(function(){setupPoemDropDowns()});var setupPoemDropDowns=function(){localStorage.setItem("poem-dropdown",$(".panel-list li").first().attr("id")),$(".content-toggle").on("click",function(){var a=$(this).data("id"),b=$("#"+a),c=localStorage.getItem("poem-dropdown");if(!b.hasClass("open"))if(a===c)b.find(".content").slideUp(),b.removeClass("open");else{var d=$("#"+c);d.find(".content").slideUp(),d.removeClass("open"),localStorage.setItem("poem-dropdown",a),b.find(".content").slideDown(),b.addClass("open")}})};